{% extends "base.html" %}

{% block title %}Settings - MediPlant Admin{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <!-- Admin Sidebar -->
        <div class="col-lg-2 admin-sidebar">
            <div class="admin-nav">
                <h6 class="text-white px-3 mb-3">
                    <i class="fas fa-user-shield me-2"></i>Admin Panel
                </h6>
                
                <a href="{{ url_for('admin_dashboard') }}" class="admin-nav-link">
                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                </a>
                <a href="{{ url_for('admin_products') }}" class="admin-nav-link">
                    <i class="fas fa-seedling me-2"></i>Products
                </a>
                <a href="{{ url_for('admin_users') }}" class="admin-nav-link">
                    <i class="fas fa-users me-2"></i>Users
                </a>
                <a href="{{ url_for('admin_orders') }}" class="admin-nav-link">
                    <i class="fas fa-box me-2"></i>Orders
                </a>
                <a href="{{ url_for('admin_categories') }}" class="admin-nav-link">
                    <i class="fas fa-tags me-2"></i>Categories
                </a>
                <a href="{{ url_for('admin_analytics') }}" class="admin-nav-link">
                    <i class="fas fa-chart-bar me-2"></i>Analytics
                </a>
                <a href="{{ url_for('admin_settings') }}" class="admin-nav-link active">
                    <i class="fas fa-cog me-2"></i>Settings
                </a>
                
                <hr class="my-3 border-secondary">
                
                <a href="{{ url_for('index') }}" class="admin-nav-link">
                    <i class="fas fa-home me-2"></i>View Site
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-10 admin-content">
            <!-- Page Header -->
            <div class="row mb-4">
                <div class="col-md-12">
                    <h2 class="fw-bold text-primary mb-2">System Settings</h2>
                    <p class="text-muted">Configure your MediPlant store settings</p>
                </div>
            </div>

            <!-- General Settings -->
            <div class="row mb-4">
                <div class="col-lg-8">
                    <div class="card shadow-soft mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-store me-2"></i>Store Settings
                            </h5>
                        </div>
                        <div class="card-body">
                            <form id="storeSettings">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="storeName" class="form-label">Store Name</label>
                                        <input type="text" class="form-control" id="storeName" value="MediPlant">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="storeEmail" class="form-label">Store Email</label>
                                        <input type="email" class="form-control" id="storeEmail" value="admin@mediplant.com">
                                    </div>
                                    <div class="col-12">
                                        <label for="storeDescription" class="form-label">Store Description</label>
                                        <textarea class="form-control" id="storeDescription" rows="3">Your trusted source for natural medicinal plants and herbal remedies</textarea>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="storePhone" class="form-label">Contact Phone</label>
                                        <input type="tel" class="form-control" id="storePhone" value="+91 9876543210">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="storeAddress" class="form-label">Store Address</label>
                                        <input type="text" class="form-control" id="storeAddress" value="Mumbai, Maharashtra, India">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Save Changes
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Payment Settings -->
                    <div class="card shadow-soft mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-credit-card me-2"></i>Payment Settings
                            </h5>
                        </div>
                        <div class="card-body">
                            <form id="paymentSettings">
                                <div class="row g-3">
                                    <div class="col-12">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="codEnabled" checked>
                                            <label class="form-check-label" for="codEnabled">
                                                Cash on Delivery
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="upiEnabled" checked>
                                            <label class="form-check-label" for="upiEnabled">
                                                UPI Payments
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="razorpayEnabled" checked>
                                            <label class="form-check-label" for="razorpayEnabled">
                                                Razorpay Gateway
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="razorpayKey" class="form-label">Razorpay Key ID</label>
                                        <input type="text" class="form-control" id="razorpayKey" placeholder="rzp_test_xxxxxxxxxx">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="razorpaySecret" class="form-label">Razorpay Secret</label>
                                        <input type="password" class="form-control" id="razorpaySecret" placeholder="••••••••••••••••">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Save Payment Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Shipping Settings -->
                    <div class="card shadow-soft mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-truck me-2"></i>Shipping Settings
                            </h5>
                        </div>
                        <div class="card-body">
                            <form id="shippingSettings">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="freeShippingLimit" class="form-label">Free Shipping Above (INR)</label>
                                        <input type="number" class="form-control" id="freeShippingLimit" value="3750">
                                        <div class="form-text">Orders above this amount get free shipping</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="shippingCharge" class="form-label">Standard Shipping Charge (INR)</label>
                                        <input type="number" class="form-control" id="shippingCharge" value="449">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="deliveryDays" class="form-label">Standard Delivery Days</label>
                                        <input type="number" class="form-control" id="deliveryDays" value="5" min="1" max="30">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="expressDeliveryDays" class="form-label">Express Delivery Days</label>
                                        <input type="number" class="form-control" id="expressDeliveryDays" value="2" min="1" max="10">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Save Shipping Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="col-lg-4">
                    <div class="card shadow-soft mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-tools me-2"></i>System Maintenance
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-info" onclick="clearCache()">
                                    <i class="fas fa-broom me-2"></i>Clear Cache
                                </button>
                                <button class="btn btn-outline-warning" onclick="backupDatabase()">
                                    <i class="fas fa-database me-2"></i>Backup Database
                                </button>
                                <button class="btn btn-outline-success" onclick="optimizeDatabase()">
                                    <i class="fas fa-cogs me-2"></i>Optimize Database
                                </button>
                                <button class="btn btn-outline-primary" onclick="checkUpdates()">
                                    <i class="fas fa-sync me-2"></i>Check Updates
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- System Info -->
                    <div class="card shadow-soft mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-info-circle me-2"></i>System Information
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 small">
                                <div class="col-6"><strong>Version:</strong></div>
                                <div class="col-6">1.0.0</div>
                                
                                <div class="col-6"><strong>Database:</strong></div>
                                <div class="col-6">SQLite</div>
                                
                                <div class="col-6"><strong>Server:</strong></div>
                                <div class="col-6">Flask Dev</div>
                                
                                <div class="col-6"><strong>Python:</strong></div>
                                <div class="col-6">3.10+</div>
                                
                                <div class="col-6"><strong>Last Backup:</strong></div>
                                <div class="col-6">Never</div>
                                
                                <div class="col-6"><strong>Cache Size:</strong></div>
                                <div class="col-6">0 MB</div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Settings -->
                    <div class="card shadow-soft">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-shield-alt me-2"></i>Security
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="maintenanceMode">
                                <label class="form-check-label" for="maintenanceMode">
                                    Maintenance Mode
                                </label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="userRegistration" checked>
                                <label class="form-check-label" for="userRegistration">
                                    Allow User Registration
                                </label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="guestCheckout" checked>
                                <label class="form-check-label" for="guestCheckout">
                                    Guest Checkout
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Store Settings Form
document.getElementById('storeSettings').addEventListener('submit', function(e) {
    e.preventDefault();
    showToast('Store settings saved successfully!', 'success');
});

// Payment Settings Form
document.getElementById('paymentSettings').addEventListener('submit', function(e) {
    e.preventDefault();
    showToast('Payment settings saved successfully!', 'success');
});

// Shipping Settings Form
document.getElementById('shippingSettings').addEventListener('submit', function(e) {
    e.preventDefault();
    showToast('Shipping settings saved successfully!', 'success');
});

// System Maintenance Functions
function clearCache() {
    showToast('Cache cleared successfully!', 'success');
}

function backupDatabase() {
    showToast('Database backup initiated. You will be notified when complete.', 'info');
}

function optimizeDatabase() {
    showToast('Database optimization completed!', 'success');
}

function checkUpdates() {
    showToast('System is up to date!', 'info');
}

// Security toggles
document.getElementById('maintenanceMode').addEventListener('change', function() {
    if (this.checked) {
        showToast('Maintenance mode enabled. Site is now offline for visitors.', 'warning');
    } else {
        showToast('Maintenance mode disabled. Site is now live.', 'success');
    }
});

document.getElementById('userRegistration').addEventListener('change', function() {
    if (this.checked) {
        showToast('User registration enabled.', 'success');
    } else {
        showToast('User registration disabled.', 'warning');
    }
});

document.getElementById('guestCheckout').addEventListener('change', function() {
    if (this.checked) {
        showToast('Guest checkout enabled.', 'success');
    } else {
        showToast('Guest checkout disabled. Users must login to checkout.', 'warning');
    }
});
</script>
{% endblock %}
